---
title: "存储引擎"  
date: 2025-11-24 15:08:01
categories: 
  - 八股
  - 数据库 
---

## 执行一条SQL请求的过程是什么？

* **连接器**：建立连接，管理连接、校验用户身份；
* **查询缓存**：查询语句如果命中查询缓存则直接返回，否则继续往下执行。MySQL 8.0 已删除该模块；
* **解析 SQL**：通过解析器对 SQL 查询语句进行词法分析、语法分析，然后构建语法树，方便后续模块读取表名、字段、语句类型；
* **执行 SQL**：执行 SQL 共有三个阶段：
  * **预处理阶段**：检查表或字段是否存在；将 select \* 中的 \* 符号*  扩展为表上的所有列。
  * **优化阶段**：基于查询成本的考虑， 选择查询成本最小的执行计划；
  * **执行阶段**：根据执行计划执行 SQL 查询语句，从存储引擎读取记录，返回给客户端；

## 讲一讲mysql的引擎吧，你有什么了解？

* **InnoDB**：InnoDB是MySQL的默认存储引擎，具有**ACID事务支持、行级锁、外键约束**等特性。它适
用于**高并发的读写操作**，支持较好的数据完整性和并发控制。
* **MyISAM**：MyISAM是MySQL的另一种常见的存储引擎，具有**较低的存储空间和内存消耗**，适用于**大量读操作的场景**。然而，MyISAM不支持事务、行级锁和外键约束，因此在并发写入和数据完整
性方面有一定的限制。
* **Memory**：Memory引擎将**数据存储在内存**中，适用于**对性能要求较高的读**操作，但是在服务器重启或崩溃时数据会丢失。它不支持事务、行级锁和外键约束。

## MySQL为什么InnoDB是默认引擎？

InnoDB引擎在事务支持、并发性能、崩溃恢复等方面具有优势，因此被MySQL选择为默认的存储引擎。

* **事务支持**：InnoDB引擎提供了对事务的支持，可以进行ACID（原子性、一致性、隔离性、持久性）属性的操作。Myisam存储引擎是不支持事务的。
* **并发性能**：InnoDB引擎采用了**行级锁定**的机制，可以提供更好的并发性能，Myisam存储引擎只支持表锁，锁的粒度比较大。
* **崩溃恢复**：InnoDB引引擎通过 redolog 日志实现了崩溃恢复，可以在数据库发生异常情况（如断电）时，通过日志文件进行恢复，保证数据的持久性和一致性。Myisam是不支持崩溃恢复的。

## 数据管理里，数据文件大体分成哪几种数据文件？

我们每创建一个 database（数据库） 都会在 /var/lib/mysql/ 目录里面创建一个以 database 为名的目录，然后保存表结构和表数据的文件都会存放在这个目录里。

共有三个文件，这三个文件分别代表着：

* **db.opt**，用来存储当前数据库的默认字符集和字符校验规则。
* **t_order.frm** ，t_order 的表结构会保存在这个文件。在 MySQL 中建立一张表都会生成一个.frm 文件，该文件是用来保存每个表的元数据信息的，主要包含表结构定义。
* **t_order.ibd**，t_order 的表数据会保存在这个文件。表数据既可以存在共享表空间文件（文件名：ibdata1）里，也可以(默认)存放在独占表空间文件（文件名：表名字.ibd）。

mysql8.0以后db.opt和.frm都被移除。表的元数据信息被统一存储在 **数据字典**(mysql.idb)中


